(function(){$(function(){var getSpartansScores;getSpartansScores=function(appId,itemSource,itemCandidates,callback){return $.post("http://api.spartans.co/v1/apps/"+appId+"/suggestions",{source:itemSource,candidates:itemCandidates.join()},function(data){return callback(data)})};if($(".spartans").length){return $(".spartans").each(function(){var $spartans,spartansAppId,spartansCandidates,spartansSource;$spartans=$(this);spartansAppId=$spartans.data("spartans-app-id");spartansSource=$spartans.data("spartans-source");spartansCandidates=[];$spartans.find(".spartans-candidate").each(function(i,obj){return spartansCandidates.push($(this).data("spartans-id"))});return getSpartansScores(spartansAppId,spartansSource,spartansCandidates,function(data){$spartans.find(".spartans-candidate").each(function(){var $this;$this=$(this);return $this.attr("data-spartans-score",data.suggestion.scores[$this.data("spartans-id")])});return $spartans.find(".spartans-candidate").sort(function(a,b){return+b.getAttribute("data-spartans-score")-+a.getAttribute("data-spartans-score")}).appendTo($spartans)})})}})}).call(this);